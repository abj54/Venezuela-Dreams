<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>VDreams</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- Plugin CSS -->
    <link href="vendor/magnific-popup/magnific-popup.css" rel="stylesheet" type="text/css">

    <!-- Custom styles for this template -->
    <link href="css/freelancer.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/login_form.css">
    <link rel="stylesheet" type="text/css" href="css/util.css">
    <link rel="icon" type="image/png" href="img/icons/favicon.ico"/>


</head>

<body id="page-top">

<!-- Navigation -->
<nav class="navbar navbar-expand-lg bg-secondary fixed-top text-uppercase" id="mainNav">
    <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="index.html">Venezuela Dream</a>
        <button class="navbar-toggler navbar-toggler-right text-uppercase bg-primary text-white rounded" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            Menu
            <i class="fa fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item mx-0 mx-lg-1">
                    <a href="donationhub.html" class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger btn" data-toggle="modal" data-target="#form-modal" style="width:auto;">Sign In</a>
                </li>
                <li class="nav-item mx-0 mx-lg-1">
                    <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#about">Donation</a>
                </li>
                <li class="nav-item mx-0 mx-lg-1">
                    <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#contact">Contact</a>
                </li>
            </ul>
        </div>
    </div>
</nav>



<div class="limiter">
    <div class="container-login100">
        <div class="login100-more" style="background-image: url('img/child-labour.jpg');"></div>

        <div class="wrap-login100 p-l-50 p-r-50 p-t-72 p-b-50">
            <form class="login100-form validate-form">
					<span class="login100-form-title p-b-59">
						Sign Up
					</span>

                <div class="wrap-input100 validate-input" data-validate="Name is required">
                    <span class="label-input100">First Name</span>
                    <input class="input100" id="signup_fname" type="text" name="name" placeholder="First Name...">
                    <span class="focus-input100"></span>
                </div>

                <div class="wrap-input100 validate-input" data-validate="Name is required">
                    <span class="label-input100">Last Name</span>
                    <input class="input100" id="signup_lname" type="text" name="name" placeholder="Last Name...">
                    <span class="focus-input100"></span>
                </div>

                <div class="wrap-input100 validate-input" data-validate = "Valid email is required: ex@abc.xyz">
                    <span class="label-input100">Email</span>
                    <input class="input100" id="signup_email" type="text" name="email" placeholder="Email addess...">
                    <span class="focus-input100"></span>
                </div>

                <div class="wrap-input100 validate-input" data-validate = "Password is required">
                    <span class="label-input100">Password</span>
                    <input class="input100" id="signup_password" type="text" name="pass" placeholder="*************">
                    <span class="focus-input100"></span>
                </div>

                <div class="wrap-input100 validate-input" data-validate = "Repeat Password is required">
                    <span class="label-input100">Repeat Password</span>
                    <input class="input100" id="signup_confirmpassword" type="text" name="repeat-pass" placeholder="*************">
                    <span class="focus-input100"></span>
                </div>

                <div class="flex-m w-full p-b-33">
                    <div class="contact100-form-checkbox">
                        <input class="input-checkbox100" id="ckb1" type="checkbox" name="remember-me">
                        <label class="label-checkbox100" for="ckb1">
								<span class="txt1">
									I agree to the
									<a href="#" class="txt2 hov1">
										Terms of User
									</a>
								</span>
                        </label>
                    </div>


                </div>

                <div class="container-login100-form-btn">
                    <div class="wrap-login100-form-btn">
                        <div class="login100-form-bgbtn"></div>
                        <button id="signup-final" class="login100-form-btn">
                            Sign Up
                        </button>
                    </div>

                    <a href="#" class="dis-block txt3 hov1 p-r-30 p-t-10 p-b-10 p-l-30">
                        Sign in
                        <i class="fa fa-long-arrow-right m-l-5"></i>
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
    <!-- Footer -->
    <footer class="footer text-center">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-5 mb-lg-0">
                    <h4 class="text-uppercase mb-4">Location</h4>
                    <p class="lead mb-0">Wentworth Institute of Technology
                        <br>Room No. 602 SE Class</p>
                </div>
                <div class="col-md-4 mb-5 mb-lg-0">
                    <h4 class="text-uppercase mb-4">Around the Web</h4>
                    <ul class="list-inline mb-0">
                        <li class="list-inline-item">
                            <a class="btn btn-outline-light btn-social text-center rounded-circle" href="#">
                                <i class="fa fa-fw fa-facebook"></i>
                            </a>
                        </li>
                        <li class="list-inline-item">
                            <a class="btn btn-outline-light btn-social text-center rounded-circle" href="#">
                                <i class="fa fa-fw fa-google-plus"></i>
                            </a>
                        </li>
                        <li class="list-inline-item">
                            <a class="btn btn-outline-light btn-social text-center rounded-circle" href="#">
                                <i class="fa fa-fw fa-twitter"></i>
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h4 class="text-uppercase mb-4">About Venezuela Dream</h4>
                    <p class="lead mb-0">Help to end Hunger
                        <a href="http://google.com">Google</a>.</p>
                </div>
            </div>
        </div>
    </footer>

    <div class="copyright py-4 text-center text-white">
        <div class="container">
            <small>Copyright &copy; Your Website 2018</small>
        </div>
    </div>

    <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
    <div class="scroll-to-top d-lg-none position-fixed ">
        <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top">
            <i class="fa fa-chevron-up"></i>0
        </a>
    </div>

<div class="modal fade" id="messageModal" tabindex="-1" role="dialog" aria-labelledby="Message" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="messageModalLabel">Message</h4>
            </div>
            <div class="modal-footer">
                <div class="pre-auth">
                    <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                    <span class="">
              <button type="submit" class="btn btn-primary" data-dismiss="modal" data-toggle="modal" data-target="#registerModal">Register</button>
              <button type="submit" class="btn btn-success" data-dismiss="modal" data-toggle="modal" data-target="#loginModal">Login</button>
            </span>
                </div>
                <div class="post-auth"></div>
            </div>
        </div>
    </div>
</div>




<script src="https://www.gstatic.com/firebasejs/4.9.1/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-auth.js"></script>

<script src="js/signup_form.js"></script>
<script src="js/authentication.js"></script>
<script src="js/login_form"></script>
<!-- Bootstrap core JavaScript -->

<script src="vendor/jquery/jquery.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<!-- Plugin JavaScript -->
<script src="vendor/jquery-easing/jquery.easing.min.js"></script>
<script src="vendor/magnific-popup/jquery.magnific-popup.min.js"></script>

<!-- Contact Form JavaScript -->
<script src="js/jqBootstrapValidation.js"></script>

<!-- Custom scripts for this website -->
<script src="js/freelancer.min.js"></script>
<script type="text/javascript">

    $(document).ready(function() {
        //initialize the firebase app
        console.log("launching app");
        //initialize the firebase app
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyAxRzq1PB3KqksVmnbuUDtwdoQepUKUXjs",
            authDomain: "vzladreams.firebaseapp.com",
            databaseURL: "https://vzladreams.firebaseio.com",
            projectId: "vzladreams",
            storageBucket: "vzladreams.appspot.com",
            messagingSenderId: "149344227690"
        };
        firebase.initializeApp(config);

        //create firebase references
        var auth = firebase.auth();
        var database = firebase.database();
        var usersRef = database.ref('user');
        console.log(usersRef);

        var Auth = null;

        //Register
        $('#signup-final').on('click', function (e) {
            e.preventDefault();
            $('#messageModalLabel').html(spanText('<i class="fa fa-cog fa-spin"></i>', ['center', 'info']));
            $('#messageModal').modal('show');
            var data = {
                email: $('#signup_email').val(), //get the email from Form
                firstName: $('#signup_fname').val(), // get firstName
                lastName: $('#signup_lname').val(), // get lastName
                registration_type : "email"
            };
            var passwords = {
                password: $('#signup_password').val(), //get the pass from Form
                cPassword: $('#signup_confirmpassword').val() //get the confirmPass from Form
            };


            if (data.email != '' && passwords.password != '' && passwords.cPassword != '') {
                if (passwords.password == passwords.cPassword) {
                    //create the user
                    firebase.auth()
                        .createUserWithEmailAndPassword(data.email, passwords.password)
                        .then(function (user) {
                            //now user is needed to be logged in to save data
                            console.log("Authenticated successfully with payload:", user);
                            Auth = user;
                            //now saving the profile data
                            usersRef
                                .child(user.uid)
                                .set(data)
                                .then(function () {
                                    console.log("User Information Saved:", user.uid);
                                });
                            $('#messageModalLabel').html(spanText('Success!', ['center', 'success']));
                            //hide the modal automatically
                            setTimeout(function () {
                                $('#messageModal').modal('hide');
                                $('.unauthenticated, .userAuth').toggleClass('unauthenticated').toggleClass('authenticated');
                            }, 500);
                            console.log("Successfully created user account with uid:", user.uid);
                            $('#messageModalLabel').html(spanText('Successfully created user account!', ['success']))
                        })
                        .catch(function (error) {
                            console.log("Error creating user:", error);
                            $('#messageModalLabel').html(spanText('ERROR: ' + error.code, ['danger']))
                        });
                } else {
                    //password and confirm password didn't match
                    $('#messageModalLabel').html(spanText("ERROR: Passwords didn't match", ['danger']))
                }
            }
        });


        function spanText(textStr, textClasses) {
            var classNames = textClasses.map(c => 'text-' + c).join(' ');
            return '<span class="' + classNames + '">' + textStr + '</span>';
        }


    });


</script>

</body>

</html>
